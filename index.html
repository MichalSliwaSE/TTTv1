<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Tic Tac Toe</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 0;
        padding: 0;
      }
      #gameContainer {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        height: 100vh;
      }
      #gameBoard {
        display: flex;
        flex-direction: column;
        border: 2px solid #000;
        border-radius: 10px;
        padding: 10px;
      }
      .row {
        display: flex;
      }
      .cell {
        width: 100px;
        height: 100px;
        border: 2px solid #000;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 80px;
        cursor: pointer;
        font-family: "Permanent Marker", cursive;
      }
      .cell:hover {
        background-color: #f4f4f4;
      }
      #statusText {
        text-align: center;
      }
      #resetButton {
        margin-top: 10px;
        padding: 10px;
        font-size: 24px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div id="gameContainer">
      <h1>Tic Tac Toe</h1>
      <div id="gameBoard">
        <div class="row">
          <div class="cell" id="cell-0"></div>
          <div class="cell" id="cell-1"></div>
          <div class="cell" id="cell-2"></div>
        </div>
        <div class="row">
          <div class="cell" id="cell-3"></div>
          <div class="cell" id="cell-4"></div>
          <div class="cell" id="cell-5"></div>
        </div>
        <div class="row">
          <div class="cell" id="cell-6"></div>
          <div class="cell" id="cell-7"></div>
          <div class="cell" id="cell-8"></div>
        </div>
      </div>
      <h2 id="statusText"></h2>
      <button id="resetButton">Reset</button>
    </div>

    <script>
      const cells = document.querySelectorAll(".cell");
      const statusText = document.querySelector("#statusText");
      const resetButton = document.querySelector("#resetButton");

      const initialState = {
        winConditions: [
          [0, 1, 2],
          [3, 4, 5],
          [6, 7, 8],
          [0, 3, 6],
          [1, 4, 7],
          [2, 5, 8],
          [0, 4, 8],
          [2, 4, 6],
        ],
        options: ["", "", "", "", "", "", "", "", ""],
        currentPlayer: "X",
        running: true,
      };

      function cellClicked(state, cellIndex) {
        if (state.options[cellIndex] !== "" || !state.running) {
          return state;
        }

        const updatedOptions = state.options.map((value, index) =>
          index === cellIndex ? state.currentPlayer : value
        );

        const winner = checkWinner(updatedOptions, state.winConditions);
        const nextPlayer = state.currentPlayer === "X" ? "O" : "X";

        return {
          ...state,
          options: updatedOptions,
          currentPlayer: winner ? state.currentPlayer : nextPlayer,
          running: !winner,
        };
      }

      function checkWinner(options, winConditions) {
        for (let condition of winConditions) {
          const [a, b, c] = condition;
          if (
            options[a] &&
            options[a] === options[b] &&
            options[a] === options[c]
          ) {
            return true;
          }
        }
        return false;
      }

      function restartGame() {
        return initialState;
      }

      document.addEventListener("DOMContentLoaded", () => {
        let currentState = initialState;

        cells.forEach((cell, index) => {
          cell.addEventListener("click", () => {
            currentState = cellClicked(currentState, index);
            render(currentState);
          });
        });

        resetButton.addEventListener("click", () => {
          currentState = restartGame();
          render(currentState);
        });

        function render(state) {
          cells.forEach((cell, index) => {
            cell.textContent = state.options[index];
          });

          if (checkWinner(state.options, state.winConditions)) {
            statusText.textContent = `${state.currentPlayer} wins!`;
          } else if (!state.options.includes("")) {
            statusText.textContent = "It's a draw!";
          } else {
            statusText.textContent = `${state.currentPlayer}'s turn`;
          }
        }

        render(initialState);
      });
    </script>
  </body>
</html>
